# encoding: utf-8

require 'minitest'
require 'minitest/autorun'
require 'minitest/pride'

require 'evacuees/pdf_extractor'

Evacuees::Test = MiniTest::Test

class Evacuees::Test
  module TestPDFExtractorConstants
    def pdf_0_header
      ["都道府県コード", "都道府県名", "避難所（公民館、学校等）", "旅館・ホテル", "その他（親族・知人宅等）", "住宅等（公営、仮設、民間、病院含む）", "計", "所在判明市区町村数", "注釈", "年月日"]
    end

    def pdf_0_body
      [["JP-01", "北海道", 0, 0, 1005, 1545, 2550, 105, "NA", "2011-07-28"], ["JP-02", "青森県", 0, 26, 786, 357, 1169, 34, "NA", "2011-07-28"], ["JP-03", "岩手県", 1144, 2032, 1716, "NA", 4892, 16, "NA", "2011-07-28"], ["JP-04", "宮城県", 8247, 2035, "NA", "NA", 10282, 21, "NA", "2011-07-28"], ["JP-05", "秋田県", 6, 485, 787, 379, 1657, 21, "NA", "2011-07-28"], ["JP-06", "山形県", 142, 744, 813, 6879, 8578, 35, "NA", "2011-07-28"], ["JP-07", "福島県", 1898, 11294, "NA", "NA", 13192, 35, "NA", "2011-07-28"], ["JP-08", "茨城県", 41, 128, 637, 1559, 2365, 39, "NA", "2011-07-28"], ["JP-09", "栃木県", 36, 332, 938, 1497, 2803, 26, "NA", "2011-07-28"], ["JP-10", "群馬県", 14, 385, 362, 1542, 2303, 31, "NA", "2011-07-28"], ["JP-11", "埼玉県", 943, 49, 0, 1661, 2653, 39, "NA", "2011-07-28"], ["JP-12", "千葉県", "NA", "NA", 3537, "NA", 3537, 47, "NA", "2011-07-28"], ["JP-13", "東京都", 97, 271, 2286, 4550, 7204, 50, "NA", "2011-07-28"], ["JP-14", "神奈川県", 54, 0, 0, 1409, 1463, 4, "＊", "2011-07-28"], ["JP-15", "新潟県", 230, 1685, 1514, 3915, 7344, 31, "＊", "2011-07-28"], ["JP-16", "富山県", 0, 0, 103, 396, 499, 13, "NA", "2011-07-28"], ["JP-17", "石川県", 0, 11, 164, 394, 569, 14, "NA", "2011-07-28"], ["JP-18", "福井県", 0, 11, 116, 376, 503, 16, "NA", "2011-07-28"], ["JP-19", "山梨県", 0, 22, 366, 488, 876, 22, "NA", "2011-07-28"], ["JP-20", "長野県", 51, 35, 285, 864, 1235, 52, "NA", "2011-07-28"], ["JP-21", "岐阜県", 0, 0, 179, 200, 379, 30, "NA", "2011-07-28"], ["JP-22", "静岡県", 0, 307, 426, 748, 1481, 33, "NA", "2011-07-28"], ["JP-23", "愛知県", 0, 0, 244, 1013, 1257, 45, "NA", "2011-07-28"], ["JP-24", "三重県", 0, 0, 43, 156, 199, 13, "NA", "2011-07-28"], ["JP-25", "滋賀県", 0, 0, 279, 144, 423, 16, "NA", "2011-07-28"], ["JP-26", "京都府", 0, "NA", 48, 742, 790, 13, "NA", "2011-07-28"], ["JP-27", "大阪府", "NA", "NA", "NA", 999, 999, 24, "NA", "2011-07-28"], ["JP-28", "兵庫県", 0, 0, 416, 592, 1008, 26, "NA", "2011-07-28"], ["JP-29", "奈良県", 0, 0, 64, 75, 139, 14, "NA", "2011-07-28"], ["JP-30", "和歌山県", 0, 0, 56, 45, 101, 15, "NA", "2011-07-28"], ["JP-31", "鳥取県", 0, 0, 78, 69, 147, 15, "NA", "2011-07-28"], ["JP-32", "島根県", 0, 0, 28, 140, 168, 11, "NA", "2011-07-28"], ["JP-33", "岡山県", 0, 0, 174, 246, 420, 18, "NA", "2011-07-28"], ["JP-34", "広島県", 0, 0, 145, 283, 428, 14, "NA", "2011-07-28"], ["JP-35", "山口県", 0, 0, 103, 90, 193, 13, "NA", "2011-07-28"], ["JP-36", "徳島県", 0, 0, 51, 72, 123, 12, "NA", "2011-07-28"], ["JP-37", "香川県", 0, 0, 25, 56, 81, 9, "NA", "2011-07-28"], ["JP-38", "愛媛県", 0, 0, 154, 108, 262, 11, "NA", "2011-07-28"], ["JP-39", "高知県", 0, 0, 78, 57, 135, 16, "NA", "2011-07-28"], ["JP-40", "福岡県", 0, 0, 194, 410, 604, 36, "NA", "2011-07-28"], ["JP-41", "佐賀県", 0, 0, 81, 200, 281, 12, "NA", "2011-07-28"], ["JP-42", "長崎県", 0, 0, 65, 104, 169, 16, "NA", "2011-07-28"], ["JP-43", "熊本県", 0, 0, 104, 131, 235, 25, "NA", "2011-07-28"], ["JP-44", "大分県", 0, 0, 147, 231, 378, 16, "NA", "2011-07-28"], ["JP-45", "宮崎県", 0, 0, 76, 72, 148, 10, "NA", "2011-07-28"], ["JP-46", "鹿児島県", 0, 0, 121, 126, 247, 24, "NA", "2011-07-28"], ["JP-47", "沖縄県", 2, 66, 80, 446, 594, 21, "NA", "2011-07-28"]]
    end

    def pdf_8_body
      [["JP-01", "北海道", 0, 0, 924, 2106, 3030, 99, "NA", "2011-11-17"], ["JP-02", "青森県", 0, 1, 599, 522, 1122, 28, "NA", "2011-11-17"], ["JP-03", "岩手県", 0, 0, 885, 41587, 42472, 20, "※1", "2011-11-17"], ["JP-04", "宮城県", 31, 16, 191, 121991, 122229, 35, "※1", "2011-11-17"], ["JP-05", "秋田県", 0, 45, 727, 808, 1580, 20, "NA", "2011-11-17"], ["JP-06", "山形県", 12, 130, 663, 12711, 13516, 34, "NA", "2011-11-17"], ["JP-07", "福島県", 41, 92, "NA", 94210, 94343, 59, "※1", "2011-11-17"], ["JP-08", "茨城県", 16, 31, 634, 2342, 3023, 39, "NA", "2011-11-17"], ["JP-09", "栃木県", 0, 9, 948, 1740, 2697, 25, "NA", "2011-11-17"], ["JP-10", "群馬県", 0, 0, 309, 1724, 2033, 28, "NA", "2011-11-17"], ["JP-11", "埼玉県", 670, 6, 0, 4245, 4921, 56, "NA", "2011-11-17"], ["JP-12", "千葉県", 0, "NA", 3675, "NA", 3675, 46, "NA", "2011-11-17"], ["JP-13", "東京都", 7, 301, 2467, 6094, 8869, 55, "NA", "2011-11-17"], ["JP-14", "神奈川県", 0, 0, 0, 2087, 2087, 2, "※1", "2011-11-17"], ["JP-15", "新潟県", 0, 6, 472, 6504, 6982, 30, "※1", "2011-11-17"], ["JP-16", "富山県", 0, 0, 106, 331, 437, 11, "NA", "2011-11-17"], ["JP-17", "石川県", 0, 1, 122, 417, 540, 13, "NA", "2011-11-17"], ["JP-18", "福井県", 0, 20, 92, 377, 489, 16, "NA", "2011-11-17"], ["JP-19", "山梨県", 0, 0, 295, 540, 835, 21, "NA", "2011-11-17"], ["JP-20", "長野県", 0, 7, 215, 945, 1167, 48, "NA", "2011-11-17"], ["JP-21", "岐阜県", 0, 0, 191, 232, 423, 29, "NA", "2011-11-17"], ["JP-22", "静岡県", 0, 16, 464, 968, 1448, 33, "NA", "2011-11-17"], ["JP-23", "愛知県", 0, 0, 250, 1002, 1252, 46, "NA", "2011-11-17"], ["JP-24", "三重県", 0, 0, 41, 148, 189, 12, "NA", "2011-11-17"], ["JP-25", "滋賀県", 0, 0, 267, 136, 403, 16, "NA", "2011-11-17"], ["JP-26", "京都府", 0, "NA", 238, 811, 1049, 18, "NA", "2011-11-17"], ["JP-27", "大阪府", 0, 0, 294, 1117, 1411, 33, "NA", "2011-11-17"], ["JP-28", "兵庫県", 0, 0, 413, 659, 1072, 28, "NA", "2011-11-17"], ["JP-29", "奈良県", 0, 0, 67, 89, 156, 17, "NA", "2011-11-17"], ["JP-30", "和歌山県", 0, 0, 49, 70, 119, 14, "NA", "2011-11-17"], ["JP-31", "鳥取県", 0, 0, 41, 131, 172, 15, "NA", "2011-11-17"], ["JP-32", "島根県", 0, 0, 20, 125, 145, 11, "NA", "2011-11-17"], ["JP-33", "岡山県", 0, 0, 151, 344, 495, 18, "NA", "2011-11-17"], ["JP-34", "広島県", 0, 0, 171, 325, 496, 13, "NA", "2011-11-17"], ["JP-35", "山口県", 0, 0, 100, 99, 199, 13, "NA", "2011-11-17"], ["JP-36", "徳島県", 0, 0, 72, 89, 161, 14, "NA", "2011-11-17"], ["JP-37", "香川県", 0, 0, 27, 63, 90, 8, "NA", "2011-11-17"], ["JP-38", "愛媛県", 0, 0, 174, 92, 266, 12, "NA", "2011-11-17"], ["JP-39", "高知県", 0, 0, 80, 54, 134, 15, "NA", "2011-11-17"], ["JP-40", "福岡県", 0, 0, 220, 491, 711, 37, "NA", "2011-11-17"], ["JP-41", "佐賀県", 0, 0, 68, 241, 309, 11, "NA", "2011-11-17"], ["JP-42", "長崎県", 0, 0, 79, 108, 187, 14, "NA", "2011-11-17"], ["JP-43", "熊本県", 0, 0, 100, 164, 264, 26, "NA", "2011-11-17"], ["JP-44", "大分県", 0, 0, 111, 261, 372, 16, "NA", "2011-11-17"], ["JP-45", "宮崎県", 0, 0, 97, 148, 245, 13, "NA", "2011-11-17"], ["JP-46", "鹿児島県", 0, 0, 103, 165, 268, 26, "NA", "2011-11-17"], ["JP-47", "沖縄県", 0, 29, 92, 699, 820, 22, "NA", "2011-11-17"]]
    end

    def pdf_31_body
      [["JP-01", "北海道", 0, 0, 532, 2285, 2817, 90, "NA", "2013-07-04"], ["JP-02", "青森県", 0, 0, 463, 408, 871, 24, "NA", "2013-07-04"], ["JP-03", "岩手県", 0, 0, 332, 37914, 38246, 29, "※1", "2013-07-04"], ["JP-04", "宮城県", 0, 0, 1063, 98491, 99554, 35, "※1", "2013-07-04"], ["JP-05", "秋田県", 0, 0, 479, 685, 1164, 20, "NA", "2013-07-04"], ["JP-06", "山形県", 0, 0, 546, 8123, 8669, 33, "NA", "2013-07-04"], ["JP-07", "福島県", 0, 0, "NA", 92770, 92770, 47, "※1", "2013-07-04"], ["JP-08", "茨城県", 0, 0, 590, 4679, 5269, 42, "NA", "2013-07-04"], ["JP-09", "栃木県", 0, 0, 567, 2525, 3092, 25, "NA", "2013-07-04"], ["JP-10", "群馬県", 0, 0, 213, 1420, 1633, 27, "NA", "2013-07-04"], ["JP-11", "埼玉県", 107, 0, 0, 3296, 3403, 56, "NA", "2013-07-04"], ["JP-12", "千葉県", 0, "NA", 4030, "NA", 4030, 45, "NA", "2013-07-04"], ["JP-13", "東京都", 0, 0, 2218, 6633, 8851, 56, "NA", "2013-07-04"], ["JP-14", "神奈川県", 0, 0, 0, 2561, 2561, 24, "※1", "2013-07-04"], ["JP-15", "新潟県", 0, 0, 230, 4934, 5164, 28, "※1", "2013-07-04"], ["JP-16", "富山県", 0, 0, 66, 230, 296, 10, "NA", "2013-07-04"], ["JP-17", "石川県", 0, 0, 65, 376, 441, 11, "NA", "2013-07-04"], ["JP-18", "福井県", 0, 0, 49, 229, 278, 14, "NA", "2013-07-04"], ["JP-19", "山梨県", 0, 0, 155, 645, 800, 21, "NA", "2013-07-04"], ["JP-20", "長野県", 0, 0, 137, 1084, 1221, 44, "NA", "2013-07-04"], ["JP-21", "岐阜県", 0, 0, 121, 194, 315, 27, "NA", "2013-07-04"], ["JP-22", "静岡県", 0, 0, 288, 799, 1087, 33, "NA", "2013-07-04"], ["JP-23", "愛知県", 0, 0, 193, 1047, 1240, 46, "NA", "2013-07-04"], ["JP-24", "三重県", 0, 0, 93, 403, 496, 17, "NA", "2013-07-04"], ["JP-25", "滋賀県", 0, 0, 212, 118, 330, 15, "NA", "2013-07-04"], ["JP-26", "京都府", 0, 0, 289, 693, 982, 16, "NA", "2013-07-04"], ["JP-27", "大阪府", 0, 0, 297, 827, 1124, 31, "NA", "2013-07-04"], ["JP-28", "兵庫県", 0, 0, 280, 694, 974, 27, "NA", "2013-07-04"], ["JP-29", "奈良県", 0, 0, 90, 83, 173, 18, "NA", "2013-07-04"], ["JP-30", "和歌山県", 0, 0, 37, 66, 103, 11, "NA", "2013-07-04"], ["JP-31", "鳥取県", 0, 0, 49, 145, 194, 12, "NA", "2013-07-04"], ["JP-32", "島根県", 0, 0, 24, 107, 131, 13, "NA", "2013-07-04"], ["JP-33", "岡山県", 0, 0, 313, 703, 1016, 19, "NA", "2013-07-04"], ["JP-34", "広島県", 0, 0, 201, 332, 533, 15, "NA", "2013-07-04"], ["JP-35", "山口県", 0, 0, 48, 109, 157, 14, "NA", "2013-07-04"], ["JP-36", "徳島県", 0, 0, 34, 39, 73, 11, "NA", "2013-07-04"], ["JP-37", "香川県", 0, 0, 13, 84, 97, 7, "NA", "2013-07-04"], ["JP-38", "愛媛県", 0, 0, 142, 49, 191, 11, "NA", "2013-07-04"], ["JP-39", "高知県", 0, 0, 63, 64, 127, 15, "NA", "2013-07-04"], ["JP-40", "福岡県", 0, 0, 143, 584, 727, 38, "NA", "2013-07-04"], ["JP-41", "佐賀県", 0, 0, 25, 211, 236, 9, "NA", "2013-07-04"], ["JP-42", "長崎県", 0, 0, 54, 94, 148, 10, "NA", "2013-07-04"], ["JP-43", "熊本県", 0, 0, 107, 294, 401, 20, "NA", "2013-07-04"], ["JP-44", "大分県", 0, 0, 46, 244, 290, 15, "NA", "2013-07-04"], ["JP-45", "宮崎県", 0, 0, 90, 178, 268, 11, "NA", "2013-07-04"], ["JP-46", "鹿児島県", 0, 0, 83, 162, 245, 27, "NA", "2013-07-04"], ["JP-47", "沖縄県", 0, 0, 61, 933, 994, 29, "NA", "2013-07-04"]]
    end

    def pdf_38_header
      ["都道府県コード", "都道府県名", "住宅等市区町村数（公営、応急仮設、民間賃貸等）", "親族・知人宅等", "病院等", "計", "所在判明市区町村数", "注釈", "年月日"]
    end

    def pdf_38_body
      [["JP-01", "北海道", 2202, 515, 2, 2719, 89, "NA", "2014-02-13"], ["JP-02", "青森県", 354, 417, 14, 785, 23, "NA", "2014-02-13"], ["JP-03", "岩手県", 34490, 352, 5, 34847, 29, "※1", "2014-02-13"], ["JP-04", "宮城県", 88781, 1096, 5, 89882, 35, "※1", "2014-02-13"], ["JP-05", "秋田県", 635, 453, 0, 1088, 20, "NA", "2014-02-13"], ["JP-06", "山形県", 5418, 567, 82, 6067, 32, "NA", "2014-02-13"], ["JP-07", "福島県", 85589, "NA", "NA", 85589, 47, "※1", "2014-02-13"], ["JP-08", "茨城県", 4241, 636, 42, 4919, 42, "NA", "2014-02-13"], ["JP-09", "栃木県", 2310, 611, 108, 3029, 25, "NA", "2014-02-13"], ["JP-10", "群馬県", 1175, 233, 128, 1536, 26, "NA", "2014-02-13"], ["JP-11", "埼玉県", 2925, 0, 0, 2925, 56, "NA", "2014-02-13"], ["JP-12", "千葉県", 565, 3396, 1, 3962, 45, "NA", "2014-02-13"], ["JP-13", "東京都", 6026, 1970, 34, 8030, 56, "NA", "2014-02-13"], ["JP-14", "神奈川県", 2362, 0, 0, 2362, 24, "※1", "2014-02-13"], ["JP-15", "新潟県", 4492, 204, 61, 4757, 28, "NA", "2014-02-13"], ["JP-16", "富山県", 218, 63, 3, 284, 10, "NA", "2014-02-13"], ["JP-17", "石川県", 329, 66, 4, 399, 11, "NA", "2014-02-13"], ["JP-18", "福井県", 223, 47, 0, 270, 14, "NA", "2014-02-13"], ["JP-19", "山梨県", 615, 133, 0, 748, 21, "NA", "2014-02-13"], ["JP-20", "長野県", 1006, 162, 0, 1168, 42, "NA", "2014-02-13"], ["JP-21", "岐阜県", 202, 110, 0, 312, 25, "NA", "2014-02-13"], ["JP-22", "静岡県", 780, 299, 5, 1084, 30, "NA", "2014-02-13"], ["JP-23", "愛知県", 1031, 176, 0, 1207, 44, "NA", "2014-02-13"], ["JP-24", "三重県", 395, 95, 0, 490, 15, "NA", "2014-02-13"], ["JP-25", "滋賀県", 101, 203, 0, 304, 14, "NA", "2014-02-13"], ["JP-26", "京都府", 603, 321, 0, 924, 16, "NA", "2014-02-13"], ["JP-27", "大阪府", 770, 185, 0, 955, 30, "NA", "2014-02-13"], ["JP-28", "兵庫県", 647, 275, 0, 922, 26, "NA", "2014-02-13"], ["JP-29", "奈良県", 77, 91, 0, 168, 18, "NA", "2014-02-13"], ["JP-30", "和歌山県", 64, 37, 0, 101, 12, "NA", "2014-02-13"], ["JP-31", "鳥取県", 131, 51, 0, 182, 11, "NA", "2014-02-13"], ["JP-32", "島根県", 90, 28, 2, 120, 13, "NA", "2014-02-13"], ["JP-33", "岡山県", 721, 325, 0, 1046, 19, "NA", "2014-02-13"], ["JP-34", "広島県", 274, 192, 1, 467, 15, "NA", "2014-02-13"], ["JP-35", "山口県", 104, 44, 0, 148, 12, "NA", "2014-02-13"], ["JP-36", "徳島県", 42, 31, 0, 73, 12, "NA", "2014-02-13"], ["JP-37", "香川県", 81, 13, 0, 94, 7, "NA", "2014-02-13"], ["JP-38", "愛媛県", 43, 139, 2, 184, 11, "NA", "2014-02-13"], ["JP-39", "高知県", 57, 49, 0, 106, 13, "NA", "2014-02-13"], ["JP-40", "福岡県", 564, 137, 0, 701, 37, "NA", "2014-02-13"], ["JP-41", "佐賀県", 185, 24, 0, 209, 9, "NA", "2014-02-13"], ["JP-42", "長崎県", 91, 52, 0, 143, 10, "NA", "2014-02-13"], ["JP-43", "熊本県", 289, 107, 0, 396, 20, "NA", "2014-02-13"], ["JP-44", "大分県", 209, 44, 1, 254, 15, "NA", "2014-02-13"], ["JP-45", "宮崎県", 184, 72, 0, 256, 11, "NA", "2014-02-13"], ["JP-46", "鹿児島県", 156, 77, 1, 234, 25, "NA", "2014-02-13"], ["JP-47", "沖縄県", 917, 51, 5, 973, 30, "NA", "2014-02-13"]]
    end
  end

  # Only extract each PDF once for testing.
  class << self
    attr_reader :pdf_0, :pdf_8, :pdf_31, :pdf_38

    def pdf_0
      path = File.expand_path('110803hinansya.pdf', 'test_data/pdf')
      @pdf_0 ||= Evacuees::PDFExtractor.new(path).extract
    end

    def pdf_8
      path = File.expand_path('20111124hinansha.pdf', 'test_data/pdf')
      @pdf_8 ||= Evacuees::PDFExtractor.new(path).extract
    end

    def pdf_31
      path = File.expand_path('20130730_hinansha.pdf', 'test_data/pdf')
      @pdf_31 ||= Evacuees::PDFExtractor.new(path).extract
    end

    def pdf_38
      path = File.expand_path('20140226_hinansha.pdf', 'test_data/pdf')
      @pdf_38 ||= Evacuees::PDFExtractor.new(path).extract
    end
  end
end
